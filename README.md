## ğŸ§ª AgentRWE: LLM-Powered Real-World Evidence Simulation

### ğŸ“Œ Project Overview

**AgentRWE** is a behavioral simulation platform designed to model patient journeys in chronic disease management. Using **Large Language Models (LLMs)** as autonomous agents, the system simulates how a cohort of patients reacts to real-world events, such as drug supply chain disruptions or side-effect appearances.

Unlike traditional static simulations, AgentRWE leverages the reasoning capabilities of **Gemini 2.0 Flash** to generate qualitative "patient journals" and quantitative metrics (adherence and symptom levels), providing a bridge between clinical data and behavioral psychology.
<p align="center">
  <a href="https://github.com/user-attachments/assets/c294f9ca-f026-4355-808d-07452e53264a">
    <img src="https://github.com/user-attachments/assets/c294f9ca-f026-4355-808d-07452e53264a" alt="AgentRWE Architecture" width="750">
  </a>
</p>
### ğŸ¤– The Core Engine: LLM as a Patient Agent

At the heart of this project is the `PatientAgent` class. Each patient is not just a row in a database, but an **autonomous agent** with:

* **Unique Profiles:** Defined by age, medical history, and personality traits.
* **Cognitive Continuity:** The agent processes monthly events and decides its adherence level based on its "mental state."
* **Qualitative Output:** The LLM generates short journal entries explaining *why* the patient behaved in a certain way, providing context that numbers alone cannot capture.

### âš¡ The Power of Causal Reasoning

One of the main objectives of AgentRWE is to move beyond mere correlation to explore **Causal Inference** in healthcare:

* **Simulating "What-If" Scenarios (Counterfactuals):** By introducing a "Shock Event" (e.g., a treatment shortage in Month 3), we can observe the direct **causal impact** on patient adherence and symptom progression.
* **Understanding the "Why" (Mechanisms):** Traditional RWD (Real-World Data) often shows a drop in adherence without explanation. By using LLM agents, we can identify the **causal pathway**: *Shortage -> Anxiety -> Intentional Non-Adherence -> Symptom Relapse*.
* **Heterogeneous Treatment Effects:** We can observe how the same cause (the shock) produces different effects across the cohort, helping researchers understand which patient profiles are most "causally vulnerable" to specific risks.

### ğŸ› ï¸ Tech Stack

* **Engine:** Python 3.x
* **LLM API:** Google Gemini 2.0 Flash (via `google-genai`)
* **Interface:** Streamlit (Interactive Web Dashboard)
* **Data Visualization:** Plotly (Dynamic charts & individual trajectories)
* **Data Handling:** Pandas

## ğŸš€ How to Run

#### 1. Locally

1. Clone the repo: `git clone https://github.com/erivaninan/cohort-LLM.git`
2. Install dependencies: `pip install -r requirements.txt`
3. Set up your `config/api.toml` with your Gemini API Key.
4. Run the app: `streamlit run app.py`

#### 2. On the Web

Access the live dashboard here: [AgentRWE Live](https://cohort-llm.streamlit.app/)

### ğŸ“ˆ Future Roadmap

* **RAG Integration:** Allow agents to "read" medical brochures to see how information impacts their behavior.
* **Advanced Causal Graphs:** Integrating `Do-Calculus` libraries to formally map the causal relationships generated by the agents.
